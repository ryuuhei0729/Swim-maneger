<div class="w-full pt-16">
  <div class="text-center mb-12">
    <h1 class="text-4xl font-bold text-gray-900 mb-3">ようこそ、<%= current_user_auth.email %>さん</h1>
    <p class="text-lg text-gray-600">Swim Managerへようこそ！</p>
  </div>

  <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 mb-12 shadow-lg">
    <h2 class="text-2xl font-bold text-gray-900 mb-6">Swim Managerとは？</h2>
    <p class="text-gray-700 text-lg leading-relaxed mb-8">
      Swim Managerは、水泳部の活動をより楽しく、効率的にするための管理ツールです。
      メンバー同士のコミュニケーションを促進し、練習記録の管理や大会情報の共有を簡単に行うことができます。
    </p>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-white rounded-xl p-6 shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105">
        <div class="flex items-center mb-4">
          <div class="rounded-full bg-blue-100 p-3">
            <svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="ml-4 text-lg font-semibold text-gray-900">練習記録の管理と分析</h3>
        </div>
      </div>
      <div class="bg-white rounded-xl p-6 shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105">
        <div class="flex items-center mb-4">
          <div class="rounded-full bg-blue-100 p-3">
            <svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="ml-4 text-lg font-semibold text-gray-900">大会情報の共有とエントリー管理</h3>
        </div>
      </div>
      <div class="bg-white rounded-xl p-6 shadow-md transition-all duration-300 hover:shadow-lg hover:scale-105">
        <div class="flex items-center mb-4">
          <div class="rounded-full bg-blue-100 p-3">
            <svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="ml-4 text-lg font-semibold text-gray-900">メンバー間のコミュニケーション促進</h3>
        </div>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
    <div class="flex items-center justify-between p-6 bg-gradient-to-r from-blue-600 to-indigo-600">
      <h2 class="text-2xl font-bold text-white">練習カレンダー</h2>
      <div class="flex space-x-2">
        <button id="prevMonth" class="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-all">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        <button id="nextMonth" class="px-4 py-2 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-all">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>

    <div class="p-6">
      <div id="calendar" class="w-full">
        <div class="flex items-center justify-center mb-8">
          <h3 id="currentMonth" class="text-2xl font-semibold text-gray-800"></h3>
        </div>
        <div class="grid grid-cols-7 gap-1 mb-1">
          <div class="text-center font-medium text-red-500 p-2">日</div>
          <div class="text-center font-medium p-2">月</div>
          <div class="text-center font-medium p-2">火</div>
          <div class="text-center font-medium p-2">水</div>
          <div class="text-center font-medium p-2">木</div>
          <div class="text-center font-medium p-2">金</div>
          <div class="text-center font-medium text-blue-500 p-2">土</div>
        </div>
        <div id="calendarDays" class="grid grid-cols-7 gap-1">
          <!-- 日付はJavaScriptで動的に生成されます -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  let currentDate = new Date();
  const calendar = document.getElementById('calendar');
  const currentMonthElement = document.getElementById('currentMonth');
  const calendarDays = document.getElementById('calendarDays');
  const prevMonthButton = document.getElementById('prevMonth');
  const nextMonthButton = document.getElementById('nextMonth');

  function updateCalendar() {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    
    // 月の表示を更新
    currentMonthElement.textContent = `${year}年 ${month + 1}月`;
    
    // カレンダーの日付をクリア
    calendarDays.innerHTML = '';
    
    // 月の最初の日の曜日を取得（0: 日曜日）
    const firstDay = new Date(year, month, 1).getDay();
    
    // 月の最終日を取得
    const lastDate = new Date(year, month + 1, 0).getDate();
    
    // 前月の日数を取得
    const prevMonthLastDate = new Date(year, month, 0).getDate();
    
    // 前月の日付を追加
    for (let i = firstDay - 1; i >= 0; i--) {
      const dayElement = createDayElement(prevMonthLastDate - i, 'text-gray-400');
      calendarDays.appendChild(dayElement);
    }
    
    // 現在の月の日付を追加
    for (let i = 1; i <= lastDate; i++) {
      const isToday = new Date().toDateString() === new Date(year, month, i).toDateString();
      const dayElement = createDayElement(i, isToday ? 'bg-blue-50 border-blue-200' : '');
      calendarDays.appendChild(dayElement);
    }
    
    // 次月の日付を追加（42マスになるまで）
    const remainingDays = 42 - (firstDay + lastDate);
    for (let i = 1; i <= remainingDays; i++) {
      const dayElement = createDayElement(i, 'text-gray-400');
      calendarDays.appendChild(dayElement);
    }
  }

  function createDayElement(day, additionalClass) {
    const div = document.createElement('div');
    div.className = `min-h-[100px] p-2 border hover:bg-gray-50 transition-colors ${additionalClass}`;
    div.innerHTML = `
      <div class="text-right text-sm font-medium mb-1">${day}</div>
      <div class="space-y-1">
        <!-- ここに練習予定などを表示 -->
      </div>
    `;
    return div;
  }

  // 前月ボタンのイベントリスナー
  prevMonthButton.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() - 1);
    updateCalendar();
  });

  // 次月ボタンのイベントリスナー
  nextMonthButton.addEventListener('click', () => {
    currentDate.setMonth(currentDate.getMonth() + 1);
    updateCalendar();
  });

  // 初期表示
  updateCalendar();
});

const userMenuButton = document.getElementById('userMenuButton');
const userMenu = document.getElementById('userMenu');
let isMenuOpen = false;

userMenuButton.addEventListener('click', () => {
  isMenuOpen = !isMenuOpen;
  userMenu.classList.toggle('hidden');
});

// メニュー外クリックで閉じる
document.addEventListener('click', (event) => {
  if (!userMenuButton.contains(event.target) && !userMenu.contains(event.target)) {
    isMenuOpen = false;
    userMenu.classList.add('hidden');
  }
});
</script>
